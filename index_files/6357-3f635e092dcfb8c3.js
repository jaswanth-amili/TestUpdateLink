"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6357],{89660:function(t,e,n){n.d(e,{Y:function(){return vt}});var o=n(70865),s=n(66383),r=n(92228),i=n(52322),a=n(30382),l=n.n(a),d=n(2784),c=n(73857),u=n(19453),m=n(45103),f=n(91842),p=n(79091),g=n(93130),v=n(81303),h=n(73066),I=n(90551),C=n(22659),T=n(13813),b=n(64023),x=n(96485),y=n(72072),_=n(31619),L=n(95460),Z=n(25140),P=n(48543);function w(){var t=(0,r.Z)(["\n    mutation AddConstToList($listId: ID!, $constId: ID!) {\n        addItemToList(\n            input: { listId: $listId, item: { itemElementId: $constId } }\n        ) {\n            listId\n        }\n    }\n"]);return w=function(){return t},t}function E(){var t=(0,r.Z)(["\n    mutation RemoveConstFromList($listId: ID!, $constId: ID!) {\n        removeElementFromList(\n            input: { listId: $listId, itemElementId: $constId }\n        ) {\n            listId\n        }\n    }\n"]);return E=function(){return t},t}var M=l()(w()),N=l()(E());function j(){var t=(0,r.Z)(["\n    fragment AddConstToListMenuItem on List {\n        id\n        name {\n            originalText\n        }\n    }\n"]);return j=function(){return t},t}function A(){var t=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    width: 100%;\n"]);return A=function(){return t},t}function k(){var t=(0,r.Z)(["\n    ","\n    flex-grow: 1;\n    cursor: pointer;\n    padding: 0.75rem 1rem 0.75rem 0.75rem;\n    position: relative;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    word-break: break-all;\n    white-space: nowrap;\n\n    &:after {\n        position: absolute;\n        content: '';\n        right: 0;\n        top: 20%;\n        height: 60%;\n        width: 1px;\n        ","\n    }\n"]);return k=function(){return t},t}function V(){var t=(0,r.Z)(["\n    margin-right: 0.5rem;\n"]);return V=function(){return t},t}function D(){var t=(0,r.Z)(["\n    ","\n"]);return D=function(){return t},t}function S(){var t=(0,r.Z)(["\n    ","\n    padding: .75rem 1rem;\n    ","\n    flex-shrink: 0;\n"]);return S=function(){return t},t}var $=l()(j()),O=function(t){var e,n=t.constId,o=t.onError,r=t.refTag,a=t.listData.id,l=(null===(e=t.listData.name)||void 0===e?void 0:e.originalText)||"",c=(0,_.N)({id:"addConstToListMenuItem_goToList_ariaLabel",defaultMessage:"Go to list: {listTitle}"},{listTitle:l}),u=(0,_.N)({id:"addConstToListMenuItem_checkins_title",defaultMessage:"Check-ins"}),f=(0,d.useState)(t.isElementInList),p=f[0],g=f[1],v=function(t){var e=(0,s.Z)((0,P.Z)(M),2),n=e[0],o=e[1],r=(0,s.Z)((0,P.Z)(N),2),i=r[0],a=r[1],l=(0,Z.B)().context,d={type:l.pageType,subType:l.subPageType,id:t.constId};return{addConstToList:{executeAddConstToList:function(e,n){return(0,L.K8)(t.refTag,d,"list-item-add",L.qB.ACTION_ONLY),o({listId:e,constId:n})},addConstToListResult:n},removeConstFromList:{executeRemoveConstFromList:function(e,n){return(0,L.K8)(t.refTag,d,"list-item-delete",L.qB.ACTION_ONLY),a({listId:e,constId:n})},removeConstFromListResult:i}}}({listId:a,constId:n,refTag:r}),h=v.addConstToList,I=v.removeConstFromList,C=h.executeAddConstToList,T=h.addConstToListResult,b=I.executeRemoveConstFromList,x=I.removeConstFromListResult,w=(null===T||void 0===T?void 0:T.error)||(null===x||void 0===x?void 0:x.error),E=function(){p?(b(a,n),g(!1)):(C(a,n),g(!0))};return w?(o(w),null):(0,i.jsxs)(R,{children:[(0,i.jsxs)(q,{onClick:E,onKeyDown:function(t){y.M6.isEnterOrSpaceKey(t)&&E()},role:"button",tabIndex:0,"data-titleinlist":p,children:[p&&(0,i.jsx)(B,{name:"playlist-add-check"}),!p&&(0,i.jsx)(U,{name:"add"}),"CHECK_INS"===t.listClass?u:l]}),(0,i.jsx)(K,{href:"/list/".concat(a,"/?ref_=").concat(r,"_sm"),"aria-label":c,children:(0,i.jsx)(m.Icon,{name:"chevron-right"})})]})};O.fragments={addConstToListMenuItem:$};var F="\n    &:focus {\n        ".concat((0,f.focusOnBaseAlt)(),"\n    }\n\n    &:hover {\n        background: rgba(\n            ").concat((0,f.getColorVarValue)("ipt-on-baseAlt-rgb"),",\n            ").concat((0,f.getColorVarValue)("ipt-baseAlt-hover-opacity"),"\n        );\n        background: rgba(\n            ").concat((0,f.getColorVar)("ipt-on-baseAlt-rgb"),",\n            ").concat((0,f.getColorVar)("ipt-baseAlt-hover-opacity"),"\n        );\n    }\n\n    &:active {\n        background: rgba(\n            ").concat((0,f.getColorVarValue)("ipt-on-baseAlt-rgb"),",\n            ").concat((0,f.getColorVarValue)("ipt-baseAlt-pressed-opacity"),"\n        );\n        background: rgba(\n            ").concat((0,f.getColorVar)("ipt-on-baseAlt-rgb"),",\n            ").concat((0,f.getColorVar)("ipt-baseAlt-pressed-opacity"),"\n        );\n    }\n"),R=u.default.div.withConfig({componentId:"sc-1aecbe70-0"})(A()),q=u.default.div.withConfig({componentId:"sc-1aecbe70-1"})(k(),F,(0,f.setPropertyToColorVar)("background-color","ipt-baseAlt-border-color")),U=(0,u.default)(m.Icon).withConfig({componentId:"sc-1aecbe70-2"})(V()),B=(0,u.default)(U).withConfig({componentId:"sc-1aecbe70-3"})(D(),(0,f.setPropertyToColorVar)("color","ipt-on-baseAlt-accent4-color")),K=u.default.a.withConfig({componentId:"sc-1aecbe70-4"})(S(),F,(0,f.setPropertyToColorVar)("color","ipt-on-baseAlt-textSecondary-color")),H={id:"common_add_to_list_buttonText",defaultMessage:"Add to list"},W={id:"addConstToListPrompt_label_createList",defaultMessage:"Create new list"},Y={id:"error_emptyStates_addConstToList_title",defaultMessage:"There was a problem. Please try again."},G={id:"common_label_viewWatchlist",defaultMessage:"View Watchlist"},z={id:"error_signedOut_addConstToList_title",defaultMessage:"Sign in to create or view a list."},Q={id:"common_ariaLabel_closePrompt",defaultMessage:"Close Prompt"},J={id:"addConstToListPrompt_no_lists_found",defaultMessage:"No lists found"},X="_ls_menu",tt="_ls_menu_new",et="_wl_button_sm",nt="actlp-loader",ot="actlp-error",st="actlp-creat-list",rt="actlp-watchlist",it="actlp-no-list",at="addConstToListPrompt__panel";function lt(){var t=(0,r.Z)(["\n    query ACTLP_Prompt(\n        $count: Int!\n        $constId: ID!\n        $after: ID\n        $listElementType: ListTypeId\n    ) {\n        lists(\n            first: $count\n            filter: {\n                listElementType: $listElementType\n                classTypes: [LIST, CHECK_INS]\n            }\n            after: $after\n        ) {\n            total\n            edges {\n                node {\n                    ...AddConstToListMenuItem\n                    isElementInList(itemElementId: $constId)\n                    listClass {\n                        id\n                    }\n                }\n            }\n            pageInfo {\n                hasNextPage\n                endCursor\n            }\n        }\n    }\n    ","\n"]);return lt=function(){return t},t}function dt(){var t=(0,r.Z)(["\n    ."," {\n        padding: 0;\n        ",";\n        min-height: 18rem;\n    }\n"]);return dt=function(){return t},t}function ct(){var t=(0,r.Z)(["\n    ","\n    ","\n"]);return ct=function(){return t},t}function ut(){var t=(0,r.Z)(["\n    ","\n    background: initial;\n    min-height: 7rem;\n    padding: 3rem;\n"]);return ut=function(){return t},t}function mt(){var t=(0,r.Z)(["\n    display: flex;\n    min-height: 7rem;\n    justify-content: center;\n    padding: 3rem;\n"]);return mt=function(){return t},t}function ft(){var t=(0,r.Z)(["\n    ",";\n"]);return ft=function(){return t},t}var pt=l()(lt(),O.fragments.addConstToListMenuItem),gt={hasNextPage:!0,listItems:[],endCursor:null},vt=function(t){var e,n,r,a=t.isOpen,l=t.onClose,u=t.primaryImage,f=t.primaryText,p=t.imageType,y=t.refMarker,_=f,L=(null===u||void 0===u||null===(e=u.caption)||void 0===e?void 0:e.plainText)||"",Z=(0,I.n)(),P=(0,c.Z)(),w=(0,T.y)(),E=w.pageType,M=w.pageConst,N=w.refTagPrefix,j=t.constId||M,A=(null===y||void 0===y?void 0:y.prefix)||N,k=null===j||void 0===j?void 0:j.startsWith("tt"),V=null===j||void 0===j?void 0:j.startsWith("nm"),D=(0,C.q)("".concat(A,"-addtolist-open"),h.qB.POP_UP,"".concat(A,"_addtolist_open")),S=(0,C.q)("".concat(A,"-addtolist-close"),h.qB.POP_UP,"".concat(A,"_addtolist_close")),$=void 0,F="poster";k&&($=g.lZ.Titles),V&&($=g.lZ.People,F="avatar");var R=(0,d.useState)(gt),q=R[0],U=R[1],B=(0,s.Z)((0,b.E)({query:pt,requestPolicy:"network-only",variables:{constId:j,count:100,after:q.endCursor,listElementType:$},context:{serverSideCacheable:!1,personalized:!0},pause:!a||!Z||!j}),1)[0],K=(0,d.useState)(void 0),lt=K[0],dt=K[1],ct=B.fetching,ut=B.error||lt,mt=null===(n=B.data)||void 0===n||null===(r=n.lists)||void 0===r?void 0:r.total,ft=E&&j?(0,i.jsx)(m.TextLink,{href:"/registration/signin/?"+"u=".concat(encodeURIComponent("/".concat(E,"/").concat(j,"/")))+"&ref_=".concat(A).concat(X),text:P.formatMessage(z)}):null,vt=P.formatMessage(Y);(0,d.useEffect)((function(){var t,e,n,o,s,r,i,l,d;a&&!ct&&(null===(t=B.data)||void 0===t?void 0:t.lists)&&q.hasNextPage&&U({listItems:(null===(e=B.data)||void 0===e||null===(n=e.lists)||void 0===n?void 0:n.edges)?q.listItems.concat(B.data.lists.edges):q.listItems,hasNextPage:null===(o=B.data)||void 0===o||null===(s=o.lists)||void 0===s||null===(r=s.pageInfo)||void 0===r?void 0:r.hasNextPage,endCursor:null===(i=B.data)||void 0===i||null===(l=i.lists)||void 0===l||null===(d=l.pageInfo)||void 0===d?void 0:d.endCursor})}),[q.hasNextPage,B.data]),(0,d.useEffect)((function(){a?D():U((0,o.Z)({},gt))}),[a]);var xt=!ut&&a&&Z&&mt!==q.listItems.length;return(0,i.jsxs)(ht,{"data-testid":"styled-list-prompt",isOpen:a,onCloseClicked:function(){l(),S()},panelClassName:at,header:(0,i.jsx)(It,{type:F,subtitle:_,reverseTitleOrder:!0,title:P.formatMessage(H),ariaLabel:L,imageModel:(0,x.G)(u,L),imageType:p}),closePromptLabel:P.formatMessage(Q),children:[Z?(0,i.jsxs)(m.MenuList,{children:[k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.MenuListItem,{className:rt,href:"/list/watchlist/?ref_=".concat(A).concat(et),postIconName:"chevron-right",children:(0,i.jsx)(v.q,(0,o.Z)({},G))}),(0,i.jsx)(m.MenuListDivider,{})]}),(0,i.jsx)(m.MenuListItem,{className:st,href:"/list/create/?ref_=".concat(A).concat(tt),postIconName:"chevron-right",children:(0,i.jsx)(v.q,(0,o.Z)({},W))}),(0,i.jsx)(m.MenuListDivider,{}),ut&&(0,i.jsx)(Ct,{className:ot,title:function(t){var e,n;return"FORBIDDEN"===(null===(e=null===t||void 0===t?void 0:t.graphQLErrors[0])||void 0===e||null===(n=e.extensions)||void 0===n?void 0:n.code)}(lt)?ft:vt}),!xt&&0===q.listItems.length&&(0,i.jsx)(Ct,{className:it,title:(0,i.jsx)(bt,{children:(0,i.jsx)(v.q,(0,o.Z)({},J))})}),!ut&&j&&q.listItems.map((function(t){var e,n;return(0,i.jsx)(O,{listData:t.node,listClass:null===(e=t.node)||void 0===e||null===(n=e.listClass)||void 0===n?void 0:n.id,isElementInList:t.node.isElementInList||!1,constId:j,onError:dt,refTag:"".concat(A).concat(X)},t.node.id)}))]}):(0,i.jsx)(Ct,{className:ot,title:ft}),xt&&(0,i.jsx)(Tt,{"data-testid":nt,children:(0,i.jsx)(m.Loader,{})})]})},ht=(0,u.default)(m.Prompt).withConfig({componentId:"sc-7fe13cfe-0"})(dt(),at,(0,f.setPropertyToShapeVar)("border-radius","ipt-cornerRadius")),It=(0,u.default)(m.PromptHeader).withConfig({componentId:"sc-7fe13cfe-1"})(ct(),(0,f.setPropertyToShapeVar)("border-top-left-radius","ipt-cornerRadius"),(0,f.setPropertyToShapeVar)("border-top-right-radius","ipt-cornerRadius")),Ct=(0,u.default)(p.G).withConfig({componentId:"sc-7fe13cfe-2"})(ut(),(0,f.setTypographyType)("body")),Tt=u.default.div.withConfig({componentId:"sc-7fe13cfe-3"})(mt()),bt=u.default.span.withConfig({componentId:"sc-7fe13cfe-4"})(ft(),(0,f.setPropertyToColorVar)("color","ipt-on-baseAlt-textSecondary-color"))},69173:function(t,e,n){var o=n(47842),s=n(2784),r=n(73857),i=n(99152);e.ZP=function(t){var e,n=t.seconds,a=t.format,l=t.unitDisplay,d=t.round,c=void 0===d||d,u=(0,r.Z)(),m=a;a&&"{hours} {minutes} {seconds}"!==a||(m=u.messages["formatted-duration-longFormatting"]||"{hours} {minutes} {seconds}"),"{minutes}:{seconds}"===a&&(m=u.messages["formatted-duration-timerFormatting"]||"{hours}:{minutes}:{seconds}");var f=new i.Z(u.locale,{format:m,formatUnits:(e={},(0,o.Z)(e,i.Z.units.DAY,u.messages["formatted-duration-daysUnit"]||"{value, plural, one {day} other {days}}"),(0,o.Z)(e,i.Z.units.HOUR,u.messages["formatted-duration-hoursUnit"]||"{value, plural, one {hour} other {hours}}"),(0,o.Z)(e,i.Z.units.MINUTE,u.messages["formatted-duration-minutesUnit"]||"{value, plural, one {minute} other {minutes}}"),(0,o.Z)(e,i.Z.units.SECOND,u.messages["formatted-duration-secondsUnit"]||"{value, plural, one {second} other {seconds}}"),e),formatDuration:u.messages["formatted-duration-duration"]||"{value} {unit}",round:c,style:l}).formatToParts(n);return s.createElement(s.Fragment,{},f.map((function(t){return"literal"===t.type||"unit"===t.type?t.value:s.createElement(s.Fragment,{key:t.type},t.value)})))}}}]);